<div layout="column">
    <div>
        <show-hide-documentation show-usage="showUsage"></show-hide-documentation>
        <div  class="api-doc-docstring" ng-show = "showUsage" layout="column">
                <p>Renames the columns in the dataset. Takes either a map or a function.</p> 
            
            <p><img src="/images/renamecolumns.png"></p>
            <a href="http://api.grafter.org/master/grafter.tabular.html#var-rename-columns" target="_blank">view source</a>
        </div>
        </div>
        <h3 style="padding-left: 20px;">Parameters</h3>
    
    <md-radio-group ng-model="renamecolumnsmode" readonly="$root.readonlymode">
      <md-radio-button value="function">Transform with function</md-radio-button>
      <md-radio-button value="map">Map values</md-radio-button> 
    </md-radio-group>
    
        <div ng-show="renamecolumnsmode==='function'">
            <p> Transform current column names </p>
<div   ng-repeat="renameFunction in function.functionsToRenameWith track by $index ">
    <div >
        <md-button class="md-primary button-tight md-default-theme" ng-click="removeRenameFunction($index)" ng-disabled="function.functionsToRenameWith.length === 1 || $root.readonlymode" aria-label="Remove function">
            <i class="fa fa-trash fa-lg"></i>
        </md-button>
        <md-input-container> 
        <md-select ng-model="function.functionsToRenameWith[$index]" placeholder="{{function.functionsToRenameWith[$index] ? function.functionsToRenameWith[$index].name : 'Choose a function...'}}" ng-selected="{{renameFunction}}" ng-disabled="$root.readonlymode">
                    <function-list> </function-list>
                </md-select>
            </md-input-container>
    </div>


</div>
          
        <md-button  class="md-raised" ng-click="addRenameFunction()" aria-label="Compose with function" ng-disabled="$root.readonlymode">Compose with </md-button>
  </div>
<div ng-show="renamecolumnsmode==='map'">
            <p> Map values </p>
<div layout="row"  ng-repeat="i in getMapLength(function.mappings.length) ">
    <div layout="row"> 
        <md-button class="md-primary button-tight md-default-theme" ng-disabled="function.mappings.length === 2 || $root.readonlymode" ng-click="removeMappingPair(i)" aria-label="Remove column mapping">
            <i class="fa fa-trash fa-lg"></i>
        </md-button>
        <div layout="column">
            <label>Column </label>
        <oi-select ng-show="colnames.length !== 0" oi-options="column.value for column in colnames track by column.id" ng-model="function.mappings[i]" ng-disabled="$root.readonlymode"></oi-select>
        <oi-select ng-show="colnames.length === 0" oi-options="column.value for column in []" oi-select-options="{newItem: true, newItemFn: 'addColumn($query)'}" ng-model="function.mappings[i]" ng-disabled="$root.readonlymode"></oi-select>
        </div>
        <div layout="column">
            <md-input-container>
            <label>New column name </label>
                <input ng-model="function.mappings[i+1]" type="text" required ng-readonly="$root.readonlymode">
            </md-input-container>
        </div>

</div>
    </div>
<md-button class="md-raised" ng-click="addRenameMapping()" aria-label="Add mapping pair" ng-disabled="$root.readonlymode">Add mapping pair</md-button>


  
</div>
    <md-input-container flex>
        <label>Comment</label>

        <input ng-model="function.docstring" type="text" ng-readonly="$root.readonlymode">
    </md-input-container>
</div>
